## PayHere 과제
- 지원자: 나태운
- email: xodns5977@naver.com

### 사용 기술
- kotlin
- Spring Boot 2.7
- Redis

### 참고 사항
[네이버 캘린더](https://calendar.naver.com)를 참조해서 만들었습니다. <br/>
가계부, 사용금액 내역, 카테고리 세 가지 나누어 설계했습니다. <br/>
이렇게 3가지로 나눈 이유는 각 관심사에만 집중할 수 있도록 분리하기 위해서 입니다 <br/>
하지만, 일부 커플링이 강한 부분은 다른 도메인의 코드도 일부 포함되어 있습니다. 

### API 테스트
```
$projectRoot/client 폴더 아래 intellij Http Client가 두었으며,
해당 클라이언트로 API 테스트 할 수 있습니다.
- 로그인 성공 하면 전역변수로 선언되어, 편하게 테스트 가능합니다.
```

### Redis를 사용한 이유
```
구현 중 `Docker를 기반으로 서버를 실행 할 수 있도록 작성해주세요.` 라는 부분이 있어,
스케일 아웃 환경일거라 예상되며 세션 클러스터링 및 캐싱을 위해서 사용했습니다.
```

### DB Schema
```
Schema: PayHere
resource/db/migration 폴더에 있습니다.
`DB 관련 테이블에 대한 DDL 파일을 소스 디렉토리 안에 넣어주세요.`
위 요구 사항을 충족함과 동시에 실제 운영 환경에서도 배포의 편의성이 있기에 flyway 를 선택했습니다. 
```

### 인증방식
```
로그인 하면 세션을 생성하며, response Header(Authorization)로 SessionId 를 내려줍니다.
가계부에 접근할 때 header에 이 토큰이 없으면 미인증 사용자로 판단하고 예외를 반환합니다.
또한 토큰이 있어도, 세션이 없다면 로그인 기간이 만료 또는 로그아웃 된거로 판단해서 예외를 반환합니다.
```

### 테스트 코드
```
코틀린 언어를 사용하기에 그에 맞는 라이브러리로 mockk로 테스트를 작성했습니다.
ex. 확장 함수, object class 등

테스트 코드는 시간 부족으로 인해 Servier Layer Unit 테스트만 작성했습니다.
```

### Email 인증
```
Email 인증 방식을 플로우에 넣긴 했지만, 과제특성상 실제 이메일 발송은 어려울거라 생각되어, 
Console에 출력하는 방식으로 대체 했습니다.
```